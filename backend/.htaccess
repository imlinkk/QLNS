# Enable PATH_INFO for routing
AcceptPathInfo On

# Enable mod_rewrite
RewriteEngine On
RewriteBase /backend/

# Handle api.php/endpoint routing
# If request is for api.php/something, pass it through with PATH_INFO
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api\.php/(.*)$ api.php/$1 [L,QSA]

# Prevent direct access to sensitive files
<FilesMatch "\.(sql|md|json|lock|log|ini)$">
    Require all denied
</FilesMatch>
